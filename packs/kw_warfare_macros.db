{"name":"K&W Command","type":"script","author":"hdCsOhsgKzweZZiP","img":"icons/skills/melee/sword-shield-stylized-white.webp","scope":"global","command":"let kwToken = token;\nif(!kwToken) {\n    if(canvas.tokens.controlled.length > 1) {\n       ui.notifications.error(\"Too many tokens selected.\");\n       return;\n    } else if (canvas.tokens.controlled.length == 0) {\n       ui.notifications.error(\"Requires 1 token selected.\");\n       return;\n    }\n    kwToken = canvas.tokens.controlled[0];\n}\n\nif(kwToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\ntoken.actor.rollKWUnitAttribute('command');","folder":null,"sort":0,"permission":{"default":0,"hdCsOhsgKzweZZiP":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.xkDicYkkc7hxqDEU"}},"_id":"JcrtxXQoSLHCxRJo"}
{"name":"K&W Power","type":"script","author":"hdCsOhsgKzweZZiP","img":"icons/skills/melee/unarmed-punch-fist.webp","scope":"global","command":"let kwToken = token;\nif(!kwToken) {\n    if(canvas.tokens.controlled.length > 1) {\n       ui.notifications.error(\"Too many tokens selected.\");\n       return;\n    } else if (canvas.tokens.controlled.length == 0) {\n       ui.notifications.error(\"Requires 1 token selected.\");\n       return;\n    }\n    kwToken = canvas.tokens.controlled[0];\n}\n\nif(kwToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\ntoken.actor.rollKWUnitAttribute('power');","folder":null,"sort":0,"permission":{"default":0,"hdCsOhsgKzweZZiP":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.qTm1ShJM8mz7y5AY"}},"_id":"KZ5tSrJB8JeDrB7U"}
{"name":"K&W Morale","type":"script","author":"hdCsOhsgKzweZZiP","img":"icons/skills/social/intimidation-impressing.webp","scope":"global","command":"let kwToken = token;\nif(!kwToken) {\n    if(canvas.tokens.controlled.length > 1) {\n       ui.notifications.error(\"Too many tokens selected.\");\n       return;\n    } else if (canvas.tokens.controlled.length == 0) {\n       ui.notifications.error(\"Requires 1 token selected.\");\n       return;\n    }\n    kwToken = canvas.tokens.controlled[0];\n}\n\nif(kwToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\ntoken.actor.rollKWUnitAttribute('morale');","folder":null,"sort":0,"permission":{"default":0,"hdCsOhsgKzweZZiP":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.sqTIy5sjtBfNMN70"}},"_id":"LZTA4SOFuSL2KTUW"}
{"name":"K&W Apply 1 Damage To Target","type":"script","author":"hdCsOhsgKzweZZiP","img":"icons/skills/melee/blood-slash-foam-red.webp","scope":"global","command":"let kwToken = token;\nif(!kwToken) {\n    if(canvas.tokens.controlled.length > 1) {\n       ui.notifications.error(\"Too many tokens selected.\");\n       return;\n    } else if (canvas.tokens.controlled.length == 0) {\n       ui.notifications.error(\"Requires 1 token selected.\");\n       return;\n    }\n    kwToken = canvas.tokens.controlled[0];\n}\n\nif(kwToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\n\nif(game.user.targets.size > 1) {\n   ui.notifications.error(\"Too many targets selected.\");\n   return;\n} else if (game.user.targets.size == 0) {\n   ui.notifications.error(\"Requires 1 target selected.\");\n   return;\n}\n\nconst targetToken = game.user.targets.values().next().value;\nif(targetToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Target not a Warfare Unit\");\n  return;\n}\n\nif(targetToken.id == kwToken.id) {\n  ui.notifications.error(\"Cannot target self.\");\n  return;\n}\n\nconst target = targetToken.actor;\n\nconst damage = 1;\n\nnew Roll(`${damage}`).roll().toMessage({\n    speaker: ChatMessage.getSpeaker(),\n    flavor: `${actor .name} hits ${target.name} for ${damage} damage.`})\ntarget.update({\"data.attributes.hp.value\" : target.data.data.attributes.hp.value - damage});","folder":null,"sort":0,"permission":{"default":0,"hdCsOhsgKzweZZiP":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.fSnxyLUn210ky6nP"}},"_id":"Mann4Bjo4o6E48Y7"}
{"name":"K&W Apply Unit's Damage To Target","type":"script","author":"hdCsOhsgKzweZZiP","img":"icons/skills/melee/blade-tips-triple-bent-white.webp","scope":"global","command":"let kwToken = token;\nif(!kwToken) {\n    if(canvas.tokens.controlled.length > 1) {\n       ui.notifications.error(\"Too many tokens selected.\");\n       return;\n    } else if (canvas.tokens.controlled.length == 0) {\n       ui.notifications.error(\"Requires 1 token selected.\");\n       return;\n    }\n    kwToken = canvas.tokens.controlled[0];\n}\n\nif(kwToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\n\nif(game.user.targets.size > 1) {\n   ui.notifications.error(\"Too many targets selected.\");\n   return;\n} else if (game.user.targets.size == 0) {\n   ui.notifications.error(\"Requires 1 target selected.\");\n   return;\n}\n\nconst targetToken = game.user.targets.values().next().value;\nif(targetToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Target not a Warfare Unit\");\n  return;\n}\n\nif(targetToken.id == kwToken.id) {\n  ui.notifications.error(\"Cannot target self.\");\n  return;\n}\n\nconst kwActor = kwToken.actor;\nconst target = targetToken.actor;\n\nconst damage = kwActor.getFlag('kw-warfare', 'stats.damage');\n\nnew Roll(`${damage}`).roll().toMessage({\n    speaker: ChatMessage.getSpeaker(),\n    flavor: `${kwActor.name} hits ${target.name} for ${damage} damage.`})\ntarget.update({\"data.attributes.hp.value\" : target.data.data.attributes.hp.value - damage});","folder":null,"sort":0,"permission":{"default":0,"hdCsOhsgKzweZZiP":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.abiRMFK1PAmMdZ8K"}},"_id":"neemjMZpQIvu6vJL"}
{"name":"K&W Attack","type":"script","author":"hdCsOhsgKzweZZiP","img":"icons/weapons/swords/scimitar-guard-brown.webp","scope":"global","command":"let kwToken = token;\nif(!kwToken) {\n    if(canvas.tokens.controlled.length > 1) {\n       ui.notifications.error(\"Too many tokens selected.\");\n       return;\n    } else if (canvas.tokens.controlled.length == 0) {\n       ui.notifications.error(\"Requires 1 token selected.\");\n       return;\n    }\n    kwToken = canvas.tokens.controlled[0];\n}\n\nif(kwToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\nkwToken.actor.rollKWUnitAttribute('attack');","folder":null,"sort":0,"permission":{"default":0,"hdCsOhsgKzweZZiP":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.8khgYQhHYRAgSbTC"}},"_id":"qSe8ms3eK7J1ScBB"}
