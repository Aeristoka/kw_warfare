{"name":"K&W Power","type":"script","img":"icons/skills/melee/unarmed-punch-fist.webp","scope":"global","command":"if(canvas.tokens.controlled.length > 1) {\n   ui.notifications.error(\"Too many tokens selected.\");\n   return;\n} else if (canvas.tokens.controlled.length == 0) {\n   ui.notifications.error(\"Requires 1 token selected.\");\n   return;\n}\n\nconst token = canvas.tokens.controlled[0];\nif(token.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\ntoken.actor.rollKWUnitAttribute('power');","folder":null,"sort":0,"permission":{"default":0},"flags":{"core":{"sourceId":"Macro.qTm1ShJM8mz7y5AY"}},"_id":"B4OxCxD2sKFMIzxd"}
{"name":"K&W Command","type":"script","img":"icons/skills/melee/sword-shield-stylized-white.webp","scope":"global","command":"if(canvas.tokens.controlled.length > 1) {\n   ui.notifications.error(\"Too many tokens selected.\");\n   return;\n} else if (canvas.tokens.controlled.length == 0) {\n   ui.notifications.error(\"Requires 1 token selected.\");\n   return;\n}\n\nconst token = canvas.tokens.controlled[0];\nif(token.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\n\ntoken.actor.rollKWUnitAttribute('command');","folder":null,"sort":0,"permission":{"default":0},"flags":{"core":{"sourceId":"Macro.xkDicYkkc7hxqDEU"}},"_id":"Bflbl3aUqZ6rIF16"}
{"name":"K&W Morale","type":"script","img":"icons/skills/social/intimidation-impressing.webp","scope":"global","command":"if(canvas.tokens.controlled.length > 1) {\n   ui.notifications.error(\"Too many tokens selected.\");\n   return;\n} else if (canvas.tokens.controlled.length == 0) {\n   ui.notifications.error(\"Requires 1 token selected.\");\n   return;\n}\n\nconst token = canvas.tokens.controlled[0];\nif(token.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\ntoken.actor.rollKWUnitAttribute('morale');","folder":null,"sort":0,"permission":{"default":0},"flags":{"core":{"sourceId":"Macro.sqTIy5sjtBfNMN70"}},"_id":"ggZkX2mnkP8hiPHx"}
{"name":"K&W Apply 1 Damage To Target","type":"script","img":"icons/skills/melee/blood-slash-foam-red.webp","scope":"global","command":"if(canvas.tokens.controlled.length > 1) {\n   ui.notifications.error(\"Too many tokens selected.\");\n   return;\n} else if (canvas.tokens.controlled.length == 0) {\n   ui.notifications.error(\"Requires 1 token selected.\");\n   return;\n}\n\nconst token = canvas.tokens.controlled[0];\nif(token.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\n\nif(game.user.targets.size > 1) {\n   ui.notifications.error(\"Too many targets selected.\");\n   return;\n} else if (game.user.targets.size == 0) {\n   ui.notifications.error(\"Requires 1 target selected.\");\n   return;\n}\n\nconst targetToken = game.user.targets.values().next().value;\nif(targetToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Target not a Warfare Unit\");\n  return;\n}\n\nconst actor = token.actor;\nconst target = targetToken.actor;\nif(targetToken.id == token.id) {\n  ui.notifications.error(\"Cannot target self.\");\n  return;\n}\n\n\nconst damage = 1;\n\nnew Roll(`${damage}`).roll().toMessage({\n    speaker: ChatMessage.getSpeaker(),\n    flavor: `${actor .name} hits ${target.name} for ${damage} damage.`})\ntarget.update({\"data.attributes.hp.value\" : target.data.data.attributes.hp.value - damage});","folder":null,"sort":0,"permission":{"default":0},"flags":{"core":{"sourceId":"Macro.fSnxyLUn210ky6nP"}},"_id":"hFchc6Z8dcWTln8o"}
{"name":"K&W Attack","type":"script","img":"icons/weapons/swords/scimitar-guard-brown.webp","scope":"global","command":"if(canvas.tokens.controlled.length > 1) {\n   ui.notifications.error(\"Too many tokens selected.\");\n   return;\n} else if (canvas.tokens.controlled.length == 0) {\n   ui.notifications.error(\"Requires 1 token selected.\");\n   return;\n}\n\nconst token = canvas.tokens.controlled[0];\nif(token.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\ntoken.actor.rollKWUnitAttribute('attack');","folder":null,"sort":0,"permission":{"default":0},"flags":{"core":{"sourceId":"Macro.8khgYQhHYRAgSbTC"}},"_id":"mn4NgXzCnTAYE9lI"}
{"name":"K&W Apply Unit's Damage To Target","type":"script","img":"icons/skills/melee/blade-tips-triple-bent-white.webp","scope":"global","command":"if(canvas.tokens.controlled.length > 1) {\n   ui.notifications.error(\"Too many tokens selected.\");\n   return;\n} else if (canvas.tokens.controlled.length == 0) {\n   ui.notifications.error(\"Requires 1 token selected.\");\n   return;\n}\n\nconst token = canvas.tokens.controlled[0];\nif(token.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Token not a Warfare Unit\");\n  return;\n}\n\nif(game.user.targets.size > 1) {\n   ui.notifications.error(\"Too many targets selected.\");\n   return;\n} else if (game.user.targets.size == 0) {\n   ui.notifications.error(\"Requires 1 target selected.\");\n   return;\n}\n\nconst targetToken = game.user.targets.values().next().value;\nif(targetToken.actor.sheet.constructor.name !== 'KW_WarfareUnitSheet') {\n  ui.notifications.error(\"Target not a Warfare Unit\");\n  return;\n}\n\nconst actor = token.actor;\nconst target = targetToken.actor;\nif(targetToken.id == token.id) {\n  ui.notifications.error(\"Cannot target self.\");\n  return;\n}\n\n\nconst damage = actor.getFlag('kw-warfare', 'stats.damage');\n\nnew Roll(`${damage}`).roll().toMessage({\n    speaker: ChatMessage.getSpeaker(),\n    flavor: `${actor .name} hits ${target.name} for ${damage} damage.`})\ntarget.update({\"data.attributes.hp.value\" : target.data.data.attributes.hp.value - damage});","folder":null,"sort":0,"permission":{"default":0},"flags":{"core":{"sourceId":"Macro.abiRMFK1PAmMdZ8K"}},"_id":"nZQQkEr1RVoRlY8x"}
